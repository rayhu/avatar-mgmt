<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰ç«¯æ—¥å¿—æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f6fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        .section h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
        }
        .btn-primary { background: #42b883; color: white; }
        .btn-primary:hover { background: #369870; }
        .btn-warning { background: #f39c12; color: white; }
        .btn-warning:hover { background: #e67e22; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn-danger:hover { background: #c0392b; }
        .btn-info { background: #3498db; color: white; }
        .btn-info:hover { background: #2980b9; }
        .log-output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        input, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px 0;
        }
        textarea {
            height: 80px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å‰ç«¯æ—¥å¿—ç³»ç»Ÿæµ‹è¯•</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•å‰ç«¯æ—¥å¿—ç³»ç»Ÿçš„å„ç§åŠŸèƒ½ã€‚</p>

        <div class="section">
            <h3>ğŸ“Š æ—¥å¿—çº§åˆ«æµ‹è¯•</h3>
            <div class="button-group">
                <button class="btn-info" onclick="testDebug()">Debug æ—¥å¿—</button>
                <button class="btn-primary" onclick="testInfo()">Info æ—¥å¿—</button>
                <button class="btn-warning" onclick="testWarn()">Warning æ—¥å¿—</button>
                <button class="btn-danger" onclick="testError()">Error æ—¥å¿—</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸŒ API è°ƒç”¨æ—¥å¿—æµ‹è¯•</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testApiCall()">æµ‹è¯• API è°ƒç”¨</button>
                <button class="btn-warning" onclick="testApiError()">æµ‹è¯• API é”™è¯¯</button>
                <button class="btn-info" onclick="testApiResponse()">æµ‹è¯• API å“åº”</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ‘¤ ç”¨æˆ·äº¤äº’æ—¥å¿—æµ‹è¯•</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testUserAction()">ç”¨æˆ·æ“ä½œ</button>
                <button class="btn-info" onclick="testRouteChange()">è·¯ç”±è·³è½¬</button>
                <button class="btn-warning" onclick="testStoreUpdate()">çŠ¶æ€æ›´æ–°</button>
            </div>
        </div>

        <div class="section">
            <h3>âš¡ æ€§èƒ½æ—¥å¿—æµ‹è¯•</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testPerformance()">æ€§èƒ½æµ‹è¯•</button>
                <button class="btn-info" onclick="testAsyncOperation()">å¼‚æ­¥æ“ä½œ</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ”§ ç»„ä»¶æ—¥å¿—æµ‹è¯•</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testComponentLog()">ç»„ä»¶æ—¥å¿—</button>
                <button class="btn-warning" onclick="testComponentError()">ç»„ä»¶é”™è¯¯</button>
                <button class="btn-info" onclick="testComponentDebug()">ç»„ä»¶è°ƒè¯•</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ¯ è‡ªå®šä¹‰æ—¥å¿—æµ‹è¯•</h3>
            <input type="text" id="customMessage" placeholder="è¾“å…¥è‡ªå®šä¹‰æ¶ˆæ¯" value="è¿™æ˜¯ä¸€æ¡è‡ªå®šä¹‰æ—¥å¿—æ¶ˆæ¯">
            <textarea id="customContext" placeholder="è¾“å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯ (JSON æ ¼å¼)">{"key": "value", "number": 123}</textarea>
            <div class="button-group">
                <button class="btn-primary" onclick="testCustomLog()">å‘é€è‡ªå®šä¹‰æ—¥å¿—</button>
                <button class="btn-warning" onclick="testCustomError()">å‘é€è‡ªå®šä¹‰é”™è¯¯</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ§¹ æ—¥å¿—æ§åˆ¶</h3>
            <div class="button-group">
                <button class="btn-info" onclick="clearLogs()">æ¸…ç©ºæ§åˆ¶å°</button>
                <button class="btn-warning" onclick="setLogLevel()">è®¾ç½®æ—¥å¿—çº§åˆ«</button>
                <button class="btn-primary" onclick="exportLogs()">å¯¼å‡ºæ—¥å¿—</button>
            </div>
        </div>

        <div class="section">
            <h3>ğŸ“‹ æ—¥å¿—è¾“å‡º</h3>
            <div class="log-output" id="logOutput">æ—¥å¿—å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ—¥å¿—ç³»ç»Ÿ
        class MockLogger {
            constructor() {
                this.level = 1; // INFO
                this.isDevelopment = true;
                this.logOutput = document.getElementById('logOutput');
            }

            formatMessage(level, message, context) {
                const timestamp = new Date().toISOString();
                const component = context?.component ? `[${context.component}]` : '';
                const contextStr = context ? ` | ${JSON.stringify(context, null, 2)}` : '';
                return `[${timestamp}] ${level} ${component} ${message}${contextStr}`;
            }

            shouldLog(level) {
                return level >= this.level;
            }

            debug(message, context) {
                if (this.shouldLog(0)) {
                    const logMessage = this.formatMessage('DEBUG', message, context);
                    console.log(logMessage);
                    this.appendToOutput(logMessage);
                }
            }

            info(message, context) {
                if (this.shouldLog(1)) {
                    const logMessage = this.formatMessage('INFO', message, context);
                    console.log(logMessage);
                    this.appendToOutput(logMessage);
                }
            }

            warn(message, context) {
                if (this.shouldLog(2)) {
                    const logMessage = this.formatMessage('WARN', message, context);
                    console.warn(logMessage);
                    this.appendToOutput(logMessage);
                }
            }

            error(message, context) {
                if (this.shouldLog(3)) {
                    const logMessage = this.formatMessage('ERROR', message, context);
                    console.error(logMessage);
                    this.appendToOutput(logMessage);
                }
            }

            apiCall(apiName, url, context) {
                this.info(`ğŸŒ ${apiName} API è°ƒç”¨`, {
                    component: 'API',
                    method: 'API_CALL',
                    url,
                    ...context
                });
            }

            apiResponse(apiName, status, context) {
                const level = status >= 400 ? 'error' : 'info';
                const message = `ğŸ“¥ ${apiName} API å“åº”`;
                const logContext = {
                    component: 'API',
                    method: 'API_RESPONSE',
                    status,
                    ...context
                };

                if (level === 'error') {
                    this.error(message, logContext);
                } else {
                    this.info(message, logContext);
                }
            }

            apiError(apiName, error, context) {
                this.error(`âŒ ${apiName} API é”™è¯¯`, {
                    component: 'API',
                    method: 'API_ERROR',
                    error: error.message,
                    errorType: error.constructor.name,
                    ...context
                });
            }

            userAction(action, context) {
                this.info(`ğŸ‘¤ ç”¨æˆ·æ“ä½œ: ${action}`, {
                    component: 'USER',
                    method: 'USER_ACTION',
                    ...context
                });
            }

            performance(operation, duration, context) {
                this.info(`âš¡ æ€§èƒ½: ${operation}`, {
                    component: 'PERFORMANCE',
                    method: 'PERFORMANCE',
                    duration,
                    ...context
                });
            }

            route(from, to, context) {
                this.info(`ğŸ›£ï¸ è·¯ç”±è·³è½¬: ${from} â†’ ${to}`, {
                    component: 'ROUTER',
                    method: 'ROUTE_CHANGE',
                    from,
                    to,
                    ...context
                });
            }

            store(action, state, context) {
                this.debug(`ğŸ“¦ Store æ›´æ–°: ${action}`, {
                    component: 'STORE',
                    method: 'STORE_UPDATE',
                    action,
                    state,
                    ...context
                });
            }

            component(componentName, message, context) {
                this.info(message, { component: componentName, ...context });
            }

            componentDebug(componentName, message, context) {
                this.debug(message, { component: componentName, ...context });
            }

            componentError(componentName, message, context) {
                this.error(message, { component: componentName, ...context });
            }

            appendToOutput(message) {
                this.logOutput.textContent += message + '\n';
                this.logOutput.scrollTop = this.logOutput.scrollHeight;
            }

            setLevel(level) {
                this.level = level;
                this.info(`æ—¥å¿—çº§åˆ«å·²è®¾ç½®ä¸º: ${level}`, {
                    component: 'Logger',
                    method: 'setLevel',
                    newLevel: level
                });
            }
        }

        // åˆ›å»ºå…¨å±€æ—¥å¿—å®ä¾‹
        const logger = new MockLogger();

        // æµ‹è¯•å‡½æ•°
        function testDebug() {
            logger.debug('è¿™æ˜¯ä¸€æ¡è°ƒè¯•æ—¥å¿—', {
                component: 'TestComponent',
                method: 'testDebug',
                data: { test: true, number: 42 }
            });
        }

        function testInfo() {
            logger.info('è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—', {
                component: 'TestComponent',
                method: 'testInfo',
                user: 'testuser',
                action: 'button_click'
            });
        }

        function testWarn() {
            logger.warn('è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—', {
                component: 'TestComponent',
                method: 'testWarn',
                warning: 'deprecated_feature',
                suggestion: 'use_new_api'
            });
        }

        function testError() {
            logger.error('è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—', {
                component: 'TestComponent',
                method: 'testError',
                error: 'network_timeout',
                retryCount: 3
            });
        }

        function testApiCall() {
            logger.apiCall('Test API', 'https://api.example.com/test', {
                method: 'GET',
                params: { id: 123 }
            });
        }

        function testApiError() {
            logger.apiError('Test API', new Error('Network timeout'), {
                url: 'https://api.example.com/test',
                timeout: 5000
            });
        }

        function testApiResponse() {
            logger.apiResponse('Test API', 200, {
                dataSize: 1024,
                duration: 150
            });
        }

        function testUserAction() {
            logger.userAction('ç‚¹å‡»æµ‹è¯•æŒ‰é’®', {
                buttonId: 'test-btn',
                timestamp: Date.now()
            });
        }

        function testRouteChange() {
            logger.route('/home', '/test', {
                userRole: 'admin',
                isAuthenticated: true
            });
        }

        function testStoreUpdate() {
            logger.store('UPDATE_USER', { name: 'testuser', role: 'admin' }, {
                previousState: { name: 'olduser' }
            });
        }

        function testPerformance() {
            const startTime = Date.now();
            setTimeout(() => {
                const duration = Date.now() - startTime;
                logger.performance('å¼‚æ­¥æ“ä½œå®Œæˆ', duration, {
                    operation: 'data_processing',
                    itemsProcessed: 1000
                });
            }, 100);
        }

        function testAsyncOperation() {
            logger.info('å¼€å§‹å¼‚æ­¥æ“ä½œ', {
                component: 'TestComponent',
                method: 'testAsyncOperation'
            });

            setTimeout(() => {
                logger.info('å¼‚æ­¥æ“ä½œå®Œæˆ', {
                    component: 'TestComponent',
                    method: 'testAsyncOperation',
                    duration: 100
                });
            }, 100);
        }

        function testComponentLog() {
            logger.component('TestComponent', 'ç»„ä»¶çŠ¶æ€æ›´æ–°', {
                method: 'updateState',
                newState: { loading: false, data: 'updated' }
            });
        }

        function testComponentError() {
            logger.componentError('TestComponent', 'ç»„ä»¶æ¸²æŸ“å¤±è´¥', {
                method: 'render',
                error: 'invalid_props',
                props: { id: 123 }
            });
        }

        function testComponentDebug() {
            logger.componentDebug('TestComponent', 'ç»„ä»¶å†…éƒ¨çŠ¶æ€', {
                method: 'internalState',
                state: { mounted: true, data: null }
            });
        }

        function testCustomLog() {
            const message = document.getElementById('customMessage').value;
            const contextStr = document.getElementById('customContext').value;
            
            try {
                const context = JSON.parse(contextStr);
                logger.info(message, {
                    component: 'CustomTest',
                    method: 'testCustomLog',
                    ...context
                });
            } catch (error) {
                logger.error('è§£æä¸Šä¸‹æ–‡ JSON å¤±è´¥', {
                    component: 'CustomTest',
                    method: 'testCustomLog',
                    error: error.message,
                    contextStr
                });
            }
        }

        function testCustomError() {
            const message = document.getElementById('customMessage').value;
            const contextStr = document.getElementById('customContext').value;
            
            try {
                const context = JSON.parse(contextStr);
                logger.error(message, {
                    component: 'CustomTest',
                    method: 'testCustomError',
                    ...context
                });
            } catch (error) {
                logger.error('è§£æä¸Šä¸‹æ–‡ JSON å¤±è´¥', {
                    component: 'CustomTest',
                    method: 'testCustomError',
                    error: error.message,
                    contextStr
                });
            }
        }

        function clearLogs() {
            console.clear();
            document.getElementById('logOutput').textContent = 'æ—¥å¿—å·²æ¸…ç©º...\n';
        }

        function setLogLevel() {
            const level = prompt('è®¾ç½®æ—¥å¿—çº§åˆ« (0=DEBUG, 1=INFO, 2=WARN, 3=ERROR, 4=NONE):', '1');
            if (level !== null) {
                const levelNum = parseInt(level);
                if (!isNaN(levelNum) && levelNum >= 0 && levelNum <= 4) {
                    logger.setLevel(levelNum);
                } else {
                    alert('æ— æ•ˆçš„æ—¥å¿—çº§åˆ«');
                }
            }
        }

        function exportLogs() {
            const logs = document.getElementById('logOutput').textContent;
            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `logs-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', () => {
            logger.info('æ—¥å¿—æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', {
                component: 'TestPage',
                method: 'onLoad',
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString()
            });
        });
    </script>
</body>
</html> 
